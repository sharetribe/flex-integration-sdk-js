<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="assets/style.css?t=90051322">
    <link rel="stylesheet" href="styles.css?t=6eea839d">
    <script src="assets/script.js?t=93f1a66c"></script>
    <script src="scripts.js?t=a9970145"></script>
    <title>Token store - Sharetribe Flex Integration SDK for JavaScript</title>
    <meta name="viewport" content="width=device-width">
    <script>if (false || window.location.hostname.indexOf("sharetribe.github.io") === window.location.hostname.length - 20) {
        (function(d,o,c,p,r,e,s){d['GoogleAnalyticsObject']=r;d[r]=d[r]||function(){(d[r].q=d[r].q||[]).push(arguments)},d[r].l=1*new Date();e=o.createElement(c),s=o.getElementsByTagName(c)[0];e.async=1;e.src=p;s.parentNode.insertBefore(e,s)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create',"UA-10178914-13",'auto')
      }
    </script>
  </head>
  <body class="-menu-visible">
    <div class="doc-layout">
      <div class="toggle menu-toggle js-menu-toggle"></div>
      <div class="menu toc-menu">
        <ul>
          <li class="menu-item -level-0 -parent">
            <ul class="submenu">
              <li class="menu-item -level-1"><a class="link title  link-index" href="index.html">Sharetribe Flex Integration SDK for JavaScript</a>
              </li>
              <li class="menu-item -level-1"><a class="link title  link-features" href="features.html">Features</a>
              </li>
              <li class="menu-item -level-1"><a class="link title  link-try-it-in-command-line" href="try-it-in-command-line.html">Try it in command-line!</a>
              </li>
              <li class="menu-item -level-1 -parent"><span class="title">Getting started</span>
                <ul class="submenu">
                  <li class="menu-item -level-2"><a class="link title  link-authentication" href="authentication.html">Authentication</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-calling-the-api" href="calling-the-api.html">Calling the API</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-types" href="types.html">Types</a>
                  </li>
                </ul>
              </li>
              <li class="menu-item -level-1 -parent"><span class="title">Advanced</span>
                <ul class="submenu">
                  <li class="menu-item -level-2"><a class="link title  link-configurations" href="configurations.html">Configurations</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-your-own-types" href="your-own-types.html">Your own types</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-serializing-types-to-json" href="serializing-types-to-json.html">Serializing types to JSON</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-object-query-parameters" href="object-query-parameters.html">Object query parameters</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title -active link-token-store" href="token-store.html">Token store</a>
                    <ul class="headings heading-list">
                      <li class="heading-item -depth-2"><a class="hlink link-memory-store" href="#memory-store">Memory store</a>
                      </li>
                      <li class="heading-item -depth-2"><a class="hlink link-file-store" href="#file-store">File store</a>
                      </li>
                      <li class="heading-item -depth-2"><a class="hlink link-writing-your-own-token-store" href="#writing-your-own-token-store">Writing your own token store</a>
                        <ul class="heading-list -depth-2">
                          <li class="heading-item -depth-3"><a class="hlink link-interface" href="#interface">Interface</a>
                          </li>
                          <li class="heading-item -depth-3"><a class="hlink link-examples" href="#examples">Examples</a>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-keep-alive" href="keep-alive.html">Keep-Alive</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-rate-limits" href="rate-limits.html">Rate limits</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-uploading-images" href="uploading-images.html">Uploading images</a>
                  </li>
                </ul>
              </li>
              <li class="menu-item -level-1"><a class="link title  link-developing-sdk" href="developing-sdk.html">Developing SDK</a>
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div class="body page-token-store">
        <div class="header-nav">
          <div class="right"><a class="iconlink" href="https://github.com/sharetribe/flex-integration-sdk-js" data-title="sharetribe/flex-integration-sdk-js">
              <!-- span.title Open in GitHub--><span class="icon -github"></span></a>
          </div>
        </div>
        <div class="markdown-body"><h1 id="token-store">Token store</h1>
<p>Token store is a pluggable SDK module, that stores the authentication tokens
obtained from the <a href="https://www.sharetribe.com/api-reference/authentication.html">Authentication
API</a>. It allows
for <a href="https://www.sharetribe.com/api-reference/authentication.html#token-types">refresh tokens</a> to be used effectively during the application execution
and, when a persistent token store is in use, across executions. Ultimately,
this helps keeping the client secret protected, as it is used less frequently on
the wire.</p>
<p>The SDK ships with two token store implementations. They are:</p>
<h2 id="memory-store">Memory store</h2>
<p>The memory store preserves the token information in the application memory. The
information is lost when the application terminates or if the SDK instance is
reinitialized.</p>
<p>This store provides a balance between security and ease of use, as it does not
require any external storage.</p>
<p>Example usage:</p>
<pre><code class="lang-js"><span class="pl-k">const</span> clientId = <span class="pl-s">&quot;&lt;your client ID here&gt;&quot;</span>;
<span class="pl-k">const</span> clientSecret = <span class="pl-s">&quot;&lt;your client secret here&gt;&quot;</span>

<span class="pl-k">const</span> integrationSdk = sharetribeIntegrationSdk.createInstance({
  clientId,
  clientSecret,
  <span class="hljs-attr">tokenStore</span>: sharetribeIntegrationSdk.tokenStore.memoryStore()
});
</code></pre>
<h2 id="file-store">File store</h2>
<p>The file store persists the token information to a file on the filesystem (in
<code>~/.config/flex-integration-sdk/file-store-token.json</code>). This allows the token
information to be reused across application invocations. Assuming that the
execution environment (server, container, computer, etc) is trusted, using the
file store reduces greatly the need to rely on the application&apos;s client secret
for obtaining access tokens.</p>
<p>The file store is <strong>the recommended token store</strong>, as long as you are aware that
sensitive token data is written to the file system.</p>
<p>Example usage:</p>
<pre><code class="lang-js"><span class="pl-k">const</span> clientId = <span class="pl-s">&quot;&lt;your client ID here&gt;&quot;</span>;
<span class="pl-k">const</span> clientSecret = <span class="pl-s">&quot;&lt;your client secret here&gt;&quot;</span>

<span class="pl-k">const</span> integrationSdk = sharetribeIntegrationSdk.createInstance({
  clientId,
  clientSecret,
  <span class="hljs-attr">tokenStore</span>: sharetribeIntegrationSdk.tokenStore.fileStore()
});
</code></pre>
<h2 id="writing-your-own-token-store">Writing your own token store</h2>
<p>The built-in stores should cover most common use cases. However, in some cases
you may need to write your own token store. This could be, for example if:</p>
<ul>
<li>you want to share access tokens across multiple instances of your application,
running on multiple machines</li>
<li>you want to store the sensitive token data in a special purpose database or
storage location</li>
</ul>
<h3 id="interface">Interface</h3>
<p>The token store interface has three methods. Any token store
implementation must implement all of them:</p>
<p><strong><code>setToken(Object) : null | Promise(null)</code></strong></p>
<p>Stores the new token. Returns either <code>null</code> or a <code>Promise</code>.</p>
<p><strong><code>getToken() : Object | Promise(Object)</code></strong></p>
<p>Reads the token from the store. Returns either a token or a Promise
holding the token as a value.</p>
<p><strong><code>removeToken : null | Promise(null)</code></strong></p>
<p>Removes the stored token. Returns either <code>null</code> or a Promise.</p>
<h3 id="examples">Examples</h3>
<p>See the built-in token store implementations.</p>

        </div>
        <div class="footer-nav">
          <div class="left"><a href="object-query-parameters.html"><span class="title">Object query parameters</span></a></div>
          <div class="right"><a href="keep-alive.html"><span class="label">Next: </span><span class="title">Keep-Alive</span></a></div>
        </div>
      </div>
    </div>
  </body>
</html>